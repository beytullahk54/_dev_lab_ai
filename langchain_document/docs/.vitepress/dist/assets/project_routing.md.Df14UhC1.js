import{_ as i,o as a,c as n,ag as t}from"./chunks/framework.DEqXEGcv.js";const E=JSON.parse('{"title":"YÃ¶nlendirme MantÄ±ÄŸÄ±","description":"","frontmatter":{},"headers":[],"relativePath":"project/routing.md","filePath":"project/routing.md"}'),e={name:"project/routing.md"};function l(p,s,h,k,r,d){return a(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="yonlendirme-mantÄ±gÄ±" tabindex="-1">YÃ¶nlendirme MantÄ±ÄŸÄ± <a class="header-anchor" href="#yonlendirme-mantÄ±gÄ±" aria-label="Permalink to &quot;YÃ¶nlendirme MantÄ±ÄŸÄ±&quot;">â€‹</a></h1><p>YÃ¶nlendirme (routing), multi-agent sistemin en kritik parÃ§asÄ±dÄ±r. YanlÄ±ÅŸ yÃ¶nlendirme, kullanÄ±cÄ±ya yanlÄ±ÅŸ uzmanÄ±n yanÄ±t vermesine yol aÃ§ar.</p><h2 id="iki-katmanlÄ±-yonlendirme" tabindex="-1">Ä°ki KatmanlÄ± YÃ¶nlendirme <a class="header-anchor" href="#iki-katmanlÄ±-yonlendirme" aria-label="Permalink to &quot;Ä°ki KatmanlÄ± YÃ¶nlendirme&quot;">â€‹</a></h2><p>Projenizde yÃ¶nlendirme iki aÅŸamada gerÃ§ekleÅŸir:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>KullanÄ±cÄ± sorusu</span></span>
<span class="line"><span>       â”‚</span></span>
<span class="line"><span>       â–¼</span></span>
<span class="line"><span>[main_router_agent]         â† 1. AÅŸama: LLM ile intent tespiti</span></span>
<span class="line"><span>  state[&quot;intent&quot;] = &quot;legal&quot;</span></span>
<span class="line"><span>       â”‚</span></span>
<span class="line"><span>       â–¼</span></span>
<span class="line"><span>[route_decision]            â† 2. AÅŸama: intent â†’ node mapping</span></span>
<span class="line"><span>  return state[&quot;intent&quot;]</span></span>
<span class="line"><span>       â”‚</span></span>
<span class="line"><span>       â–¼</span></span>
<span class="line"><span>[legal_expert_node]         â† DoÄŸru uzman devreye girer</span></span></code></pre></div><h2 id="route-decision-fonksiyonu" tabindex="-1">route_decision Fonksiyonu <a class="header-anchor" href="#route-decision-fonksiyonu" aria-label="Permalink to &quot;route_decision Fonksiyonu&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Literal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_decision</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state: AgentState) -&gt; Literal[</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;math&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;legal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;greeting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vektor&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;intent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>Bu fonksiyon son derece basit â€” state&#39;ten intent&#39;i alÄ±r ve dÃ¶ndÃ¼rÃ¼r. AsÄ±l iÅŸ <code>main_router_agent</code> iÃ§inde yapÄ±lmÄ±ÅŸtÄ±r.</p><p><code>Literal</code> tip ipucu, hangi deÄŸerlerin geÃ§erli olduÄŸunu hem IDE&#39;ye hem de LangGraph&#39;a sÃ¶yler.</p><h2 id="intent-degerleri" tabindex="-1">Intent DeÄŸerleri <a class="header-anchor" href="#intent-degerleri" aria-label="Permalink to &quot;Intent DeÄŸerleri&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>Intent</th><th>Tetikleyen Node</th><th>Ã–rnek Soru</th></tr></thead><tbody><tr><td><code>math</code></td><td>math_expert</td><td>&quot;Ä°ntegral nedir?&quot;</td></tr><tr><td><code>legal</code></td><td>legal_expert</td><td>&quot;BoÅŸanma davasÄ± nasÄ±l aÃ§Ä±lÄ±r?&quot;</td></tr><tr><td><code>it_legal</code></td><td>it_legal_expert</td><td>&quot;KVKK cezalarÄ± nelerdir?&quot;</td></tr><tr><td><code>greeting</code></td><td>greeting_expert</td><td>&quot;Merhaba, nasÄ±lsÄ±n?&quot;</td></tr><tr><td><code>vektor</code></td><td>vektor_rag_expert</td><td>&quot;Python nedir?&quot;</td></tr><tr><td><code>support</code></td><td>support_rag_expert</td><td>&quot;Uygulama neden Ã§Ã¶kÃ¼yor?&quot;</td></tr></tbody></table><h2 id="fallback-stratejisi" tabindex="-1">Fallback Stratejisi <a class="header-anchor" href="#fallback-stratejisi" aria-label="Permalink to &quot;Fallback Stratejisi&quot;">â€‹</a></h2><p>Router yanlÄ±ÅŸ/bilinmeyen bir intent Ã¼retirse ne olur?</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_decision</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state: AgentState) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    intent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;intent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].strip().lower()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Mapping&#39;de olmayan deÄŸer iÃ§in fallback</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    VALID_INTENTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;math&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;legal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;it_legal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;greeting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vektor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;support&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> intent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> VALID_INTENTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;âš ï¸ Bilinmeyen intent: &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">intent</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39; â†’ &#39;vektor&#39; olarak yÃ¶nlendiriliyor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vektor&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> intent</span></span></code></pre></div><h2 id="intent-debug" tabindex="-1">Intent Debug <a class="header-anchor" href="#intent-debug" aria-label="Permalink to &quot;Intent Debug&quot;">â€‹</a></h2><p>Hangi sorularÄ±n hangi intente yÃ¶nlendirildiÄŸini logla:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_decision</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state: AgentState) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    intent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;intent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    query_preview </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ğŸ”€ YÃ¶nlendirme: &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">query_preview</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">...&#39; â†’ [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">intent.upper()</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> intent</span></span></code></pre></div><p>Ã–rnek Ã§Ä±ktÄ±:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ğŸ”€ YÃ¶nlendirme: &#39;TÃ¼rk ceza kanununda biliÅŸim suÃ§larÄ± neler...&#39; â†’ [IT_LEGAL]</span></span>
<span class="line"><span>ğŸ”€ YÃ¶nlendirme: &#39;Merhaba!&#39; â†’ [GREETING]</span></span>
<span class="line"><span>ğŸ”€ YÃ¶nlendirme: &#39;âˆ«xÂ²dx formÃ¼lÃ¼ nedir?&#39; â†’ [MATH]</span></span></code></pre></div><h2 id="cok-boyutlu-yonlendirme" tabindex="-1">Ã‡ok Boyutlu YÃ¶nlendirme <a class="header-anchor" href="#cok-boyutlu-yonlendirme" aria-label="Permalink to &quot;Ã‡ok Boyutlu YÃ¶nlendirme&quot;">â€‹</a></h2><p>Daha karmaÅŸÄ±k senaryolar iÃ§in yÃ¶nlendirme birden fazla parametreye bakabilir:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> route_decision</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state: AgentState) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    intent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;intent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].lower()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Ã–zel durum: hem math hem de code iÃ§eriyorsa</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> intent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;math&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;python&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;code_expert&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Matematik + kodlama â†’ kod uzmanÄ±</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> intent</span></span></code></pre></div><h2 id="sonraki-adÄ±m" tabindex="-1">Sonraki AdÄ±m <a class="header-anchor" href="#sonraki-adÄ±m" aria-label="Permalink to &quot;Sonraki AdÄ±m&quot;">â€‹</a></h2><p><a href="/project/running.html">TÃ¼m Sistemi Ã‡alÄ±ÅŸtÄ±rma â†’</a></p>`,24)])])}const g=i(e,[["render",l]]);export{E as __pageData,g as default};
